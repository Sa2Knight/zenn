---
title: "Vue2 / Vue3 ã§ã‚‚ Chart.js 3 ã‚’ä½¿ã„ãŸã„"
emoji: "ğŸ“Š"
type: "tech"
topics:
  - "javascript"
  - "typescript"
  - "vue"
  - "chartjs"
published: true
published_at: "2021-09-19 12:32"
---

# Chart.js 3 ã«ã¤ã„ã¦

:::message alert
æœ¬è¨˜äº‹ã¯ vue-chart-js ãŒ Vue 3 åŠã³ Chart.js 3 ã«å¯¾å¿œã—ã¦ã„ãªã‹ã£ãŸæ™‚ä»£ã®ä»£æ›¿ç­–ã‚’ç´¹ä»‹ã—ã¦ã¾ã™ãŒã€ vue-chart-js 4.0.0 ã‹ã‚‰ãã‚Œã‚‰ãŒã‚µãƒãƒ¼ãƒˆã•ã‚ŒãŸãŸã‚ã€å¤šãã®ã‚±ãƒ¼ã‚¹ã§ã¯ãã¡ã‚‰ã§ååˆ†ã¨ãªã‚‹ãŸã‚ã€æœ¬è¨˜äº‹ã¯éæ¨å¥¨ã«ãªã‚Šã¾ã™ã€‚
:::

:::message
æœ¬è¨˜äº‹ã¯ vue-chart-3 ã®åˆæœŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å…ƒã«å‹•ä½œç¢ºèªã—ã¦ã„ã¾ã™ã€‚æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ä¸€éƒ¨ä½¿ç”¨æ–¹æ³•ãŒç•°ãªã‚‹ã®ã§ã”æ³¨æ„ãã ã•ã„
:::

[Chart.js 3](https://www.chartjs.org/docs/next/) ã¯ã€ Canvas ã‚’ç”¨ã„ãŸã‚°ãƒ©ãƒ•æç”»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦äººæ°—ã®é«˜ã„ `Chart.js` ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã€ 2021å¹´4æœˆã«[ãƒªãƒªãƒ¼ã‚¹](https://github.com/chartjs/Chart.js/releases/tag/v3.0.0)ã•ã‚Œã¾ã—ãŸã€‚

v3 ã¯å¾“æ¥ã® v2 ã¨æ¯”ã¹ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå¤§ããªæ”¹å–„ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚

- webworkers ã‚’ç”¨ã„ãŸä¸¦åˆ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãªã©ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®åŠ‡çš„å‘ä¸Š
- ç´°åˆ†åŒ–ã•ã‚ŒãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¿…è¦ååˆ†ã« import ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹ãƒ„ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚­ãƒ³ã‚°ã®æœ‰åŠ¹åŒ–
- `moment` ãªã©ã€æ—¥ä»˜æ“ä½œç”¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã®ä¾å­˜ã®æ’¤å»ƒ
- CSSã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®å»ƒæ­¢
- è†¨å¤§ãªæ•°ã®ãƒã‚°ãƒ•ã‚£ãƒƒã‚¯ã‚¹

ãŸã ã—ã€å¤šãã®ç ´å£Šçš„å¤‰æ›´ã‚’å«ã‚“ã§ã„ã‚‹ãŸã‚ã€ç§»è¡Œã®éš›ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

https://www.chartjs.org/docs/next/getting-started/v3-migration.html

# Vue ã«ãŠã‘ã‚‹ Chart.js

[vue-chartjs](https://github.com/apertureless/vue-chartjs) ã¯ã€Chart.js ã® Vue ãƒ©ãƒƒãƒ‘ãƒ¼ã®ãƒ‡ãƒ•ã‚¡ã‚¯ãƒˆã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã¨ã—ã¦é•·ã‚‰ãåˆ©ç”¨ã•ã‚Œã¦ãã¾ã—ãŸã€‚

ã—ã‹ã—ã€ vue-chartjs ã® Vue3 åŠã³ Chart.js 3 ã®ã‚µãƒãƒ¼ãƒˆã¯é›£èˆªã—ã¦ãŠã‚Šã€ç¾çŠ¶ã§ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯å›°é›£ã¨ãªã£ã¦ã„ã¾ã™ã€‚

https://github.com/apertureless/vue-chartjs/issues/695#issuecomment-841803779
https://github.com/apertureless/vue-chartjs/issues/699

ç‰¹ã« Chat.js 3 ã«ã¤ã„ã¦ã¯ã€ãã®å¤šãã®ä»•æ§˜å¤‰æ›´ã€æ”¹å–„ã¸å¯¾å¿œã™ã‚‹ã“ã¨ã ã©ã‚Œã»ã©é›£ã—ã„ã‹ã‚’ã€ãƒ¡ãƒ³ãƒ†ãƒŠãŒèªã£ã¦ãŠã‚Šã€ã™ãã«å®‰å®šã—ã¦åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹è¦‹è¾¼ã¿ã¯ãªã•ãã†ã§ã™ã€‚

https://github.com/apertureless/vue-chartjs/issues/695#issuecomment-841803779

# vue-chart-3 ã«ã¤ã„ã¦

vue-chart-3 ã¯ã€ vue-chartjs ã‚’æ–°ãŸã«æ›¸ãç›´ã™ã“ã¨ã§ã€ã“ã‚Œã‚‰ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚

https://github.com/victorgarciaesgi/vue-chart-3

å½¹å‰²ã¯ vue-chartjs ã¨æ¦‚ã­åŒã˜ã§ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹å¾´ã‚’æŒã¡ã¾ã™ã€‚

- Vue2/Vue3 ã®ä¸¡ã‚µãƒãƒ¼ãƒˆ
  - Vue2 ã®å ´åˆã¯ [@vue/composition-api](https://github.com/vuejs/composition-api) ã®è¿½åŠ ãŒå¿…è¦
- Chart.js 3 ã‚’ã‚µãƒãƒ¼ãƒˆ
- TypeScript ã«ã‚ˆã‚‹ãƒªãƒ—ãƒ¬ã‚¤ã‚¹
- CompositionAPI ã§ã® Hooks ã®æä¾› (åŸ·ç­†æ™‚ç‚¹ã§ã¯Î±)

è»½ãä½¿ã£ã¦ã¿ãŸé™ã‚Šã€vue-chartjs ã®æ©Ÿèƒ½ã«æ·±ãä¾å­˜ã™ã‚‹ä½¿ã„æ–¹ã‚’ã—ã¦ã„ãªã„é™ã‚Šã¯ã™ã‚“ãªã‚Šä½¿ãˆã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ„Ÿã˜ãŸãŸã‚ã€ç°¡å˜ãªã‚µãƒ³ãƒ—ãƒ«ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

# Vue3 + TypeScript + Chart.js 3 ã®ä¾‹

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

Vue3 ã¯ Vite ã§ã™ãã«ç’°å¢ƒã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚

```bash
$ yarn create vite
âœ” Project name: â€¦ vue-3-chartjs-3
âœ” Select a framework: â€º vue
âœ” Select a variant: â€º vue-ts

$ cd vue-3-chartjs-3/
$ yarn install
$ yarn dev
```

## chart.js / vue-chart-3 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
yarn add chart.js@^3.1.0 vue-chart-3
```

## PieChart / LineChart ã®æç”»

ã“ã“ã§ã¯ã€å††ã‚°ãƒ©ãƒ•(PieChart) ã¨æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•(LineChart) ã‚’ä¾‹ã«ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’æç”»ã—ã¦ã¿ã¾ã™ã€‚

```js:src/App.vue
<script lang="ts">
import { Chart, ChartData, registerables } from "chart.js";
import { defineComponent } from "vue";
import { PieChart, LineChart } from "vue-chart-3";

// ä½¿ç”¨ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®£è¨€
// ã“ã“ã§ã¯ä¾¿å®œä¸Šã€å…¨ã¦ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ registerables ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŒã€
// å¿…è¦ååˆ†ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã¿ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã§ã€ãƒ„ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚­ãƒ³ã‚°ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹
Chart.register(...registerables);

export default defineComponent({
  components: {
    PieChart,
    LineChart,
  },
  setup() {
    // PieChart ç”¨ã®ãƒ‡ãƒ¼ã‚¿
    const pieData: ChartData<"pie"> = {
      labels: ["Red", "Blue", "Yellow"],
      datasets: [
        {
          label: "My First Dataset",
          data: [300, 50, 100],
          backgroundColor: [
            "rgb(255, 99, 132)",
            "rgb(54, 162, 235)",
            "rgb(255, 205, 86)",
          ],
          hoverOffset: 4,
        },
      ],
    };

    // LineChart ç”¨ã®ãƒ‡ãƒ¼ã‚¿
    const lineData: ChartData<"line"> = {
      labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul"],
      datasets: [
        {
          label: "My First Dataset",
          data: [65, 59, 80, 81, 56, 55, 40],
          fill: false,
          borderColor: "rgb(75, 192, 192)",
          tension: 0.1,
        },
      ],
    };

    return { pieData, lineData };
  },
});
</script>

<template>
  <div class="wrapper">
    <PieChart :chartData="pieData" />
    <LineChart :chartData="lineData" />
  </div>
</template>

<style scoped>
.wrapper {
  display: flex;
}
</style>
```

## å®Ÿè¡Œçµæœ

å††ã‚°ãƒ©ãƒ•ã€æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã¨ã‚‚ã«æç”»ã§ãã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/4a89f75062ade96fe6588471.png)

# Vue2 + JavaScript + Chart.js 3 ã®ä¾‹

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

Vite ã ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ Vue3 ãŒä½¿ã‚ã‚Œã‚‹ã®ã§ã€ vue-cli ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ä½¿ã£ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

```bash
$ npx vue create vue2-chartjs-3
$ cd vue-2-chartjs-3/
```

## chart.js / vue-chart-3 / compositionAPI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Vue3 ã®å ´åˆã«åŠ ãˆã€ Vue2 ã§ã¯ CompositionAPI ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã«ãªã‚‹ãŸã‚ã€ã‚ã‚ã›ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
yarn add chart.js@^3.1.0 vue-chart-3  @vue/composition-api
```

## PieChart / LineChart ã®æç”»

Vue3 ã®å ´åˆã¨åŒæ§˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ Vue2 ã§æ›¸ãã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```js:src/App.vue
<template>
  <div id="app">
    <PieChart :chartData="pieData" />
    <LineChart :chartData="lineData" />
  </div>
</template>

<script>
import { Chart, registerables } from "chart.js";
import { PieChart, LineChart } from "vue-chart-3";
Chart.register(...registerables);

export default {
  components: {
    PieChart,
    LineChart,
  },
  computed: {
    pieData() {
      return {
        labels: ["Red", "Blue", "Yellow"],
        datasets: [
          {
            label: "My First Dataset",
            data: [300, 50, 100],
            backgroundColor: [
              "rgb(255, 99, 132)",
              "rgb(54, 162, 235)",
              "rgb(255, 205, 86)",
            ],
            hoverOffset: 4,
          },
        ],
      };
    },
    lineData() {
      return {
        labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul"],
        datasets: [
          {
            label: "My First Dataset",
            data: [65, 59, 80, 81, 56, 55, 40],
            fill: false,
            borderColor: "rgb(75, 192, 192)",
            tension: 0.1,
          },
        ],
      };
    },
  },
};
</script>

<style scoped>
#app {
  display: flex;
}
</style>
```

## å®Ÿè¡Œçµæœ

Vue3 ã®å ´åˆã¨åŒæ§˜ã®çµæœãŒå¾—ã‚‰ã‚ŒãŸã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚

![](https://storage.googleapis.com/zenn-user-upload/dfd0cf1de87e174c80303682.png)

# ã¾ã¨ã‚

æœ¬è¨˜äº‹ã§ã¯ã€ `vue-chartjs` ã®ä»£ã‚ã‚Šã« `vue-chart-3` ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€ Vue3 ã‚„ Chart.js 3 ã®çµ„ã¿åˆã‚ã›ãŒå®Ÿç¾ã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚

ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§ã¯æœ€å°é™ã®ã‚°ãƒ©ãƒ•æç”»ã®ã¿è¨˜è¼‰ã—ã¾ã—ãŸãŒã€ä»–ã«ã‚‚ vue-chartjs ã§å‡ºæ¥ã¦ã„ãŸãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãª data/options ã®åŒæœŸã‚‚ã‚‚ã¡ã‚ã‚“å¯èƒ½ã§ã‚ã‚‹ãŸã‚ã€ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®ç¯„å›²ã§ã‚ã‚Œã°ã™ã‚“ãªã‚Šç§»è¡Œã§ãã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ„Ÿã˜ã¾ã—ãŸã€‚