---
title: "Svelte åˆå¿ƒè€…ç”¨ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ"
emoji: "ğŸ“š"
type: "tech"
topics:
  - "javascript"
  - "svelte"
published: true
published_at: "2022-03-23 22:21"
---

# æ¦‚è¦

- è‡ªåˆ†ç”¨ã«æ•´ç†ã—ãŸã ã‘
- åŸºæœ¬çš„ã«ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‹ã‚‰æŠœç²‹
- æ™®æ®µã¯Vueã‚’æ›¸ã„ã¦ã„ã¦ Svelte ã¯ãƒ‰ç´ äººã®çŠ¶æ…‹ã§ä½œæˆã—ãŸã®ã§å†…å®¹ã«èª¤ã‚ŠãŒã‚ã‚‹ã‹ã‚‚
- TypeScript, SvelteKit ã¸ã®è¨€åŠãƒŠã‚·

# é–‹ç™ºç’°å¢ƒæ§‹ç¯‰

å¤šåˆ† Vite ãŒä¸€ç•ªæ—©ã„

```bash
yarn create vite my-svelte-app --template svelte
cd my-svelte-app/
yarn install
yarn dev
```

`localhost:3000` ã§ã‚‚ã†å‹•ã„ã¦ã‚‹

vscode ãªã‚‰ Svelte ç”¨ã®æ‹¡å¼µã‚’å…¥ã‚Œã¦ãŠã‘ã°ã€ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚„ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆãŒæ©Ÿèƒ½ã™ã‚‹

https://marketplace.visualstudio.com/items?itemName=svelte.svelte-vscode

# ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åŸºæœ¬æ§‹é€ 

Vue ã® SFC åŒæ§˜ã«ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä¸€ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ« (`.svelte`) ã«è¨˜è¿°ã™ã‚‹ã€‚

```html
<script>
  const name = 'Svelte'
</script>

<main>
  <h1>Hello, {name}</h1>
</main>

<style>
  h1 {
    color: gray;
  }
</style>
```

# è¦ç´ ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¸ã®ãƒã‚¤ãƒ³ãƒ‰

`{}` ã§ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã§ãã‚‹

```html
<script>
  const src = "https://storage.googleapis.com/zenn-user-upload/avatar/845fa75ba8.jpeg"
</script>

<main>
  <img src={src}>
</main>
```

ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã¨ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹å¤‰æ•°åãŒä¸€è‡´ã—ã¦ã‚‹å ´åˆã¯çœç•¥å¯èƒ½

```html
<main>
  <img {src}>
</main>
```

# ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

style ãƒ–ãƒ­ãƒƒã‚¯ã«è¨˜è¿°ã—ãŸ CSS ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ­ãƒ¼ã‚«ãƒ«ã¨ãªã‚Šã€ã‚¿ã‚°ã‚»ãƒ¬ã‚¯ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã‚‚ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¹²æ¸‰ã™ã‚‹ã“ã¨ã¯ãªã„

```html
<p>This is a paragraph.</p>

<style>
  p {
    color: purple;
    font-family: "Comic Sans MS", cursive;
    font-size: 2em;
  }
</style>
```

# å¤–éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ©ç”¨

import ã™ã‚‹ã ã‘ã§ã™ãã«ä½¿ç”¨å¯èƒ½ã«

```html
<script>
  import Child from "./components/Child.svelte";
</script>

<Child />
```

# ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã›ãšã«ãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›

XSS ã«ã¯æ°—ã‚’ã¤ã‘ã‚ˆã†

```html
<script>
  const html = '<h1>Hello, World!</h1>'
</script>

<div>{@html html}</div>
```

# DOMã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```html
<script>
  let count = 0
  function increment() {
    count += 1
  }
</script>

<button on:click={increment}>
  {count}
</button>
```

ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§ã‚‚å¯

```html
<div on:mousemove={e => m = { x: e.clientX, y: e.clientY }}>
	The mouse position is {m.x} x {m.y}
</div>
```

ãƒ¢ãƒ‡ã‚£ãƒ•ã‚¡ã‚¤ã‚¢ (once, preventDefault, stopPropagation ãªã©) ã¯ `|` ã§è¨­å®šå¯èƒ½

```html
<button on:click|once|capture={handleClick}>
	Click me
</button>
```

# Reactive Declarations

æ—¥æœ¬èªã§ãªã‚“ã¦å‘¼ã¶ã®ã‹ã‚ã‹ã‚‰ãªã„ã‘ã©ã€ Vue ã® computed ã¿ãŸã„ãªã‚‚ã®

```js
let count = 0
$: doubled = count * 2
```

ãƒ–ãƒ­ãƒƒã‚¯å±•é–‹ã—ã¦è¤‡æ•°è¡Œã‚‚æ›¸ã‘ã‚‹

```js
$: {
  console.log('count changed!!')
  console.log(`the count is ${count}`)
}
```

ãªã‚“ãªã‚‰æ¡ä»¶å¼ã‚‚æ›¸ã‘ã¡ã‚ƒã†

```js
$: if (count > 10) {
  alert('count is over 10')
}
```

# é…åˆ—ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ›´æ–°æ–¹æ³•

ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆã¨ã„ã†ã‹ Tips ã ã‘ã©ã€ Vue (v2) ã¨åŒæ§˜ã«ã€é…åˆ—ãƒ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ“ä½œã§ã¯ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãŒåæ˜ ã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹ã€‚

`Array#push` ã ã¨ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã‚‰ãªã„ãŒã€

```html
<script>
  let array = [1,2,3]
  function push() {
    array.push(array[array.length - 1] + 1) // â† NG
  }
</script>

<button on:click={push}>
  {array.join(',')}
</button>
```

Svelte ã ã¨ä»£å…¥ãŒãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã®ãƒˆãƒªã‚¬ãƒ¼ã«ãªã‚‹ã®ã§ã€æ˜ç¤ºçš„ãªä»£å…¥ã‚’ã™ã‚Œã°OK

```html
<script>
  let array = [1,2,3]
  function push() {
    array = [...array, array[array.length - 1] + 1] // â† OK
  }
</script>

<button on:click={push}>
  {array.join(',')}
</button>
```

# ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® props ã®å®šç¾©

å¤‰æ•°ã‚’ export ã™ã‚‹ã ã‘ã§ã€ props ã¨ã—ã¦è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰æ³¨å…¥ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹

```html:Child.svelte
<script>
  export let value
</script>

<p>props value is {value}</p>
```

```html:Parent.svelte
<Child value=1 />
```

å½“ç„¶ props ã¸ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚‚å¯èƒ½

```html:Parent.svelte
<Child value={count} />
```

props å´ã«åˆæœŸå€¤ãŒã¤ã„ã¦ã„ã‚‹ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«ãªã‚‹

```js:Child.svelte
export let value = 1
```

props ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ä¸€æ‹¬æŒ‡å®šãŒå¯èƒ½

```js:Child.svelte
export let a
export let b
export let c
```

```html:Parent.svelte
<script>
  import Child from './components/Child.svelte'
  const props = {
    a: 1,
    b: 2,
    c: 3
  }
</script>

<Child {...props} />
```

# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã®æ¡ä»¶åˆ†å²

Vue ã® v-if ã¿ãŸã„ãªã‚‚ã®

```html
{#if value % 3 === 0 && value % 5 === 0}
  <div>FizzBuzz</div>
{:else if value % 3 === 0}
  <div>Fizz</div>
{:else if value % 5 === 0}
  <div>Buzz</div>
{:else}
  <div>{value}</div>
{/if}
```

# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã®ãƒ«ãƒ¼ãƒ—

Vue ã® v-for ã¿ãŸã„ãªã‚‚ã®

```html
{#each values as value}
  <p>{value}</p>
{/each}
```

# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ Promise ã®çŠ¶æ…‹ã«ã‚ˆã‚‹åˆ†å²

Promiseã€€å¤‰æ•°ã®çŠ¶æ…‹ã«ã‚ˆã£ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§åˆ†å²ã§ãã‚‹ãŸã‚ã€å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ä¸­ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ãªã©ãŒã§ãã‚‹

```html
<script>
  const promise = new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve('resolved');
    }, 1000);
  });
</script>

{#await promise}
  <p>...waiting</p>
{:then value}
  <p>{value}</p>
{:catch error}
  <p>{error.message}</p>
{/await}
```

# ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã™ã‚‹

Vue ã® emit ã«è¿‘ã„ã‚„ã¤

```html:Child.svelte
<script>
  import { createEventDispatcher } from 'svelte'
  const dispatch = createEventDispatcher()
  const message = 'Child Value'

  function sayHello() {
    dispatch('sayHello', { message })
  }
</script>

<button on:click={sayHello}>clickMe</button>
```

```html:Parent.svelte
<script>
  import Child from './components/Child.svelte'
</script>

<Child on:sayHello={e => console.log(e.detail.message)}/>
```

ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã§ãªãã€DOMã‚¤ãƒ™ãƒ³ãƒˆã‚’ãã®ã¾ã¾è¦ªã«ä¼æ¬ã™ã‚‹å ´åˆã¯çœç•¥è¨˜æ³•ãŒä½¿ãˆã‚‹

```html
<button on:click>ClickMe</button>
```

# ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã¸ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°

input

```html
<input bind:value={name}>
```

input[type=number] input[type=range] ã®å ´åˆã¯ã€æ•°å€¤ã«æš—é»™çš„ã«å¤‰æ›ã•ã‚Œã‚‹

```html
<input type=number bind:value={a} min=0 max=10>
<input type=range bind:value={a} min=0 max=10>
```

Checkbox

```html
<input type=checkbox bind:checked={yes}>
```

Textarea

```html
<textarea bind:value={value}></textarea>
```

Select

```html
<select bind:value={selectedValue} on:change="{() => answer = ''}">
```

Select(multiple)

```html
<select multiple bind:value={flavours}>
```

Radio(ã‚°ãƒ«ãƒ¼ãƒ—)

è¤‡æ•°ã®ãƒ©ã‚¸ã‚ªã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã€ã„ãšã‚Œã‹ä¸€ã¤ãŒé¸æŠã•ã‚ŒãŸçŠ¶æ…‹ã«ã™ã‚‹

```html
<label>
  <input type=checkbox bind:group={selectedValues} name="option" value="one">
  One
</label>

<label>
  <input type=checkbox bind:group={selectedValues} name="option" value="two">
  Two
</label>

<label>
  <input type=checkbox bind:group={selectedValues} name="option" value="three">
  Three
</label>
```

Checkbox(ã‚°ãƒ«ãƒ¼ãƒ—)

è¤‡æ•°ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã€å„ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®çŠ¶æ…‹ã‚’é…åˆ—ã§ç›£è¦–ã™ã‚‹

```html
<label>
  <input
    type="checkbox"
    bind:group={selectedValues}
    name="option"
    value="one"
  />
  One
</label>

<label>
  <input
    type="checkbox"
    bind:group={selectedValues}
    name="option"
    value="two"
  />
  Two
</label>

<label>
  <input
    type="checkbox"
    bind:group={selectedValues}
    name="option"
    value="three"
  />
  Three
</label>
```

# è¦ç´ ã¸ã®ç‰¹æ®Šãªãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°

Readonly ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¸ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°

DOM ã®çŠ¶æ…‹ãŒå¤‰ã‚ã£ãŸå ´åˆã«å¤‰æ•°ã«åæ˜ ã•ã‚Œã‚‹ãŒã€å¤‰æ•°ã‚’æ›¸ãæ›ãˆã¦ã‚‚ DOM ã®çŠ¶æ…‹ã¯å¤‰ã‚ã‚‰ãªã„

```html
<div bind:clientWidth={w} bind:clientHeight={h}>Hello</div>
{ w } { h }
```

DOM ã«å¯¾ã™ã‚‹ `this` ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹ã“ã¨ã§ã€è¦ç´ ã‚’ç›´æ¥ JavaScript ã‹ã‚‰å‚ç…§å¯èƒ½ã«ã™ã‚‹

```html
<canvas
  bind:this={canvas}
  width={32}
  height={32}
></canvas>
```

# ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

onMount/onDestroy ã¯ import ãŒå¿…è¦

```js
import { onMount, onDestroy } from 'svelte'

onMount(() => console.log('Mounted'))
onDestroy(() => console.log('Destroyed'))
```

Vue ã® nextTick ã¿ãŸã„ã«ã€æ¬¡ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’å¾…æ©Ÿã™ã‚‹ã®ã«ã¯ `ticks` ã‚’ä½¿ã†

```js
import { tick } from 'svelte'
await tick();
```

# class åã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°

ã ã„ãŸã„ Vue ã¨åŒã˜ã§ã€çŠ¶æ…‹ã‚’å…ƒã« class ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹

```html
<button
	class="{current === 'foo' ? 'selected' : ''}"
	on:click="{() => current = 'foo'}"
>foo</button>
```

ã‚¯ãƒ©ã‚¹åã¨å¤‰æ•°åãŒåŒã˜å ´åˆã¯çœç•¥å¯èƒ½

```html
<div class:big>
	<!-- ... -->
</div>
```

# Store

ã‚¹ãƒˆã‚¢ã¯é–¢é€£æ€§ã®ãªã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã§ã‚¹ãƒ†ãƒ¼ãƒˆã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿

`writable` ã§æ›¸è¾¼ã¿å¯èƒ½ãªã‚¹ãƒˆã‚¢ã‚’ç”Ÿæˆå¯èƒ½

```js
import { writable } from 'svelte/store'
export const count = writable(0)
```

`writable` ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ç”¨ã„ãŸå€¤ã®æ›´æ–°ã¯ `set` `update` ã§è¡Œãˆã‚‹

```js
function increment() {
  count.update(n => n + 1)
}

function reset() {
  count.set(0)
}
```

`writable` ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã¯ `subscribe` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é€šã˜ã¦å€¤ã®å¤‰æ›´ç›£è¦–ãŒã§ãã‚‹ã€‚ `subscribe` ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¯ã€ `unsubscribe` ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒæˆ»ã‚Šå€¤ã§è¿”ã£ã¦ãã‚‹ã®ã§ã€é©åˆ‡ã« `unsubscribe` ã—ã¦ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’é¿ã‘ã‚‹

```js
const unsubscribe = count.subscribe(value => localValue = value)
onDestroy(() => unsubscribe())
```

ã¨ã„ã†ã€ã‚¹ãƒˆã‚¢ã®è³¼èª­ã¨ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ç®¡ç†ãŒé¢å€’ã™ãã‚‹ã®ã§ã€ã‚·ãƒ§ãƒ¼ãƒˆãƒãƒ³ãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚ `$` ã‚’é ­ã«ä»˜ã‘ã¦å‚ç…§ã™ã‚‹ã“ã¨ã§ã€ subscribe/unsubscribe ã‚’å‹æ‰‹ã«ã‚„ã£ã¦ãã‚Œã‚‹

```js
$count
```

èª­ã¿å–ã‚Šå°‚ç”¨ã‚¹ãƒˆã‚¢ã¯ `readable` ã§ä½œæˆå¯èƒ½

`readable` ã¯ç¬¬ä¸€å¼•æ•°ã«åˆæœŸå€¤ã€ç¬¬äºŒå¼•æ•°ã«ã€åˆã‚ã¦ subscribe ã•ã‚ŒãŸéš›ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’è¨­å®šã™ã‚‹ã€‚ãã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã®ã¿ `set` ã‚’é€šã˜ã¦å€¤ã®è¨­å®šãŒå¯èƒ½ã€‚

ã¾ãŸã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã®æˆ»ã‚Šå€¤ã§ã€è³¼èª­è€…ãŒ0ã«ãªã£ãŸã¨ãã®å¾Œå‡¦ç†ã‚’è¨˜è¿°ã§ãã‚‹

```js
import { readable } from 'svelte/store'

const time = readable(new Date(), (set) => {
  const interval = setInterval(() => {
    set(new Date())
  }, 1000)

  return () => clearInterval(interval)
})
```

ä»–ã®ã‚¹ãƒˆã‚¢ã®å€¤ã«ä¾å­˜ã—ãŸã‚¹ãƒˆã‚¢ã‚’ `derived` ã§ä½œæˆå¯èƒ½ã€‚ã‚¹ãƒˆã‚¢ã® `computed` ã¿ãŸã„ãªã‚‚ã®ã‹ãªã€‚

```js
const count = writable(0)
const doubleCount = derived(count, $count => $count * 2)
```

`subscribe` ãƒ¡ã‚½ãƒƒãƒ‰ã•ãˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å«ã¾ã‚Œã¦ã„ã‚Œã°ã€ãã‚Œã¯ã‚¹ãƒˆã‚¢ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ãŸã‚ã€ `set` `update` ã‚’éš è”½ã—ãŸã‚«ãƒ—ã‚»ãƒ«åŒ–ã‚‚å¯èƒ½ã€‚

```js
import { writable } from "svelte/store";

function createCount() {
  const { subscribe, set, update } = writable(0);

  return {
    subscribe,
    increment: () => update((n) => n + 1),
    decrement: () => update((n) => n - 1),
    reset: () => set(0),
  };
}

export const count = createCount();
```

## Motion

`tweened` ã¯ãªã‚ã‚‰ã‹ãªå€¤ã®æ›´æ–°ã‚’è¡Œã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã—ã€ã‚¹ãƒˆã‚¢åŒæ§˜ã« `subscribe` `set` ãƒ¡ã‚½ãƒƒãƒ‰ã§æ›´æ–°ã¨è³¼èª­ã‚’è¡Œã†ã€‚

```js
import { tweened } from 'svelte/motion'

const progress = tweened(0)
progress.subscribe(value => console.log(value))
progress.set(100)
```

0 ã‹ã‚‰ 100 ã«å˜ç´”ã«æ›´æ–°ã™ã‚‹ã®ã§ãªãã€ä½•åº¦ã‚‚æ›´æ–°ä½œæ¥­ã‚’è¡Œã„å°‘ã—ãšã¤0ã‹ã‚‰100ã«è¿‘ã¥ã‘ã‚‹ã€‚

`spring` ã¯ `tweened` ã¨ã«ã¦ã‚‹ãŒã€ã‚ˆã‚Šæ›´æ–°ãŒé »ç¹ã«è¡Œã‚ã‚Œã‚‹å ´åˆã«ç”¨ã„ã‚‹

```js
import { spring } from 'svelte/motion'

const progress = spring(0)
progress.subscribe(value => console.log(value))
progress.set(100)
```

## Transitions

è¦ç´ ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨ãã€éè¡¨ç¤ºã«ãªã‚‹ã¨ãã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®¹æ˜“ã«è¨­å®šã§ãã‚‹

```html
<script>
  import { fade } from 'svelte/transition'
  let isShow = false
</script>

<label>
  <input type="checkbox" bind:checked={isShow}>
  show
</label>

{#if isShow}
  <p transition:fade>ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚µãƒ³ãƒ—ãƒ«</p>
{/if}
```

import ã™ã‚‹ transition é–¢æ•°ã«å¿œã˜ã¦ç•°ãªã‚‹ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¾ã§ãã‚‹ã»ã‹ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä»˜ä¸ã«ã‚ˆã£ã¦å¾®èª¿æ•´ã‚‚è¡Œãˆã‚‹

```html
{#if isShow}
  <p transition:fly="{{ y: 200, duration: 2000 }}">ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚µãƒ³ãƒ—ãƒ«</p>
{/if}
```

è¡¨ç¤ºã™ã‚‹ã¨ãã¨ã€éè¡¨ç¤ºã«ãªã‚‹ã¨ãã§ç•°ãªã‚‹ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½

```html
<p in:fly="{{ y: 200, duration: 2000 }}" out:fade>ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚µãƒ³ãƒ—ãƒ«</p>
```

å„ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ãƒ•ãƒƒã‚¯ã™ã‚‹

```html
<p
  transition:fade
  on:introstart={() => console.log("introstart")}
  on:outrostart={() => console.log("outrostart")}
  on:introend={() => console.log("introend")}
  on:outroend={() => console.log("outroend")}
>
  ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚µãƒ³ãƒ—ãƒ«
</p>
```

è¦ç´ ãŒæ›´æ–°ã•ã‚Œã‚‹ãŸã³ã«ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚’å†å®Ÿè¡Œã—ãŸã„å ´åˆã¯ `{#key}` ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹

```html
{#key value}
  <div transition:fade>{value}</div>
{/key}
```

## Actions

ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€è¦ç´ å˜ä½ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹ã€‚

```js:actions/outerClickable
export function outerClickable(node) {
  const handleClick = (event) => {
    if (!node.contains(event.target)) {
      node.dispatchEvent(new CustomEvent("outclick"));
    }
  };

  document.addEventListener("click", handleClick, true);

  return {
    destroy() {
      document.removeEventListener("click", handleClick, true);
    },
  };
}
```

è¦ç´ ãŒç”Ÿæˆã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨ã€ç ´æ£„ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®å‡¦ç†ã‚’å®šç¾©ã§ãã‚‹ãŸã‚ã€DOMã‚¤ãƒ™ãƒ³ãƒˆã®å®‰å…¨ãªç®¡ç†ã«æ´»ç”¨ã§ãã‚‹ã€‚

```html:App.svelte
<script>
  import { outerClickable } from './actions/outerClickable'
</script>

<div use:outerClickable on:outclick={() => alert('outclick!')}>è¦ç´ ã®å¤–å´ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚¢ãƒ©ãƒ¼ãƒˆãŒé³´ã‚‹ã‚ˆ</div>
```

ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æŒ‡å®šã‚‚å¯èƒ½

```js:actions/longpress.js
export function longpress(node, duration) {
}
```

```html:App.svelte
<button use:longpress={duration}>Push</button>
```

# Slot

ã ã„ãŸã„ Vue ãªã„ã— Web Components ã¨ä¸€ç·’

```html
<div class="box">
  <slot></slot>
</div>
```

Slot ã«ä½•ã‚‚æ³¨å…¥ã•ã‚Œãªã‹ã£ãŸå€ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®æŒ‡å®š

```html
<div class="box">
  <slot>
    <em>no content was provided</em>
  </slot>
</div>
```

åå‰ä»˜ãã‚¹ãƒ­ãƒƒãƒˆ

```html:ContentCard.svelte
<article class="contact-card">
  <h2>
    <slot name="name">
      <span class="missing">Unknown name</span>
    </slot>
  </h2>

  <div class="address">
    <slot name="address">
      <span class="missing">Unknown address</span>
    </slot>
  </div>

  <div class="email">
    <slot name="email">
      <span class="missing">Unknown email</span>
    </slot>
  </div>
</article>
```

```html:App.svelte
<ContactCard>
  <span slot="name"> P. Sherman </span>

  <span slot="address">
    42 Wallaby Way<br />
    Sydney
  </span>
</ContactCard>
```

æ³¨å…¥ã•ã‚ŒãŸã‚¹ãƒ­ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹

```html
{#if $$slots.comments}
	<div class="discussion">
		<h3>Comments</h3>
		<slot name="comments"></slot>
	</div>
{/if}
```

ã‚¹ãƒ­ãƒƒãƒˆã¸ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£æ³¨å…¥

```html:Child.svelte
<div>
	<slot value={localValue}></slot>
</div>
```

```html:Parent.svelte
<Child let:value>
  { value }
</Child>
```

# Context API

React ã® Context ã¨ã ã„ãŸã„ä¸€ç·’

```js
const key = Symbol();
```

```js
setContext(key, {
  getValue: () => value,
});
```

```js
const { getValue } = getContext(key)
```

# Special elements

è‡ªåˆ†è‡ªèº«ã‚’å†å¸°çš„ã«æç”»ã™ã‚‹

```html
<svelte:self>
```

æç”»ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‹•çš„ã«æ±ºå®šã™ã‚‹

```html
<svelte:component this={selected.component}/>
```

Window ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’ãƒã‚¤ãƒ³ãƒ‰å‡ºæ¥ã‚‹æŠ½è±¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```html
<svelte:window bind:scrollY={y} on:keydown={handleKeydown}/>
```

åŒã˜ã body

```html
<svelte:body
  on:mouseenter={handleMouseenter}
  on:mouseleave={handleMouseleave}
/>
```

header ã¸ã®ã‚¿ã‚°æ³¨å…¥

```html
<svelte:head>
  <link rel="stylesheet" href="/tutorial/dark-theme.css">
</svelte:head>
```

è¤‡æ•°è¦ç´ ã‚’æŸã­ã‚‹æŠ½è±¡è¦ç´ 

```html
<Box>
  <svelte:fragment slot="footer">
    <p>All rights reserved.</p>
    <p>Copyright (c) 2019 Svelte Industries</p>
  </svelte:fragment>
</Box>
```

# Module context

åŒã˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¤‡æ•°ä½¿ç”¨ã™ã‚‹éš›ã«ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§å…±é€šã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’æŒã¦ã‚‹ã€‚private static ã¿ãŸã„ãªâ€¦ï¼Ÿ

```html
<script context="module">
  let current;
</script>
```

```html
<script context="module">
  const elements = new Set();

  export function stopAll() {
    elements.forEach(element => {
      element.pause();
    });
  }
</script>
```

# Debugging

ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹éš›ã«ãƒ­ã‚°ã‚’å‡ºåŠ›ã§ãã‚‹

```html
{@debug user}
```